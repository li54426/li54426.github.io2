---
layout: blog
banana: true
category: byte_tech
title:  "Go_"
date:   2023-08-17 10:11:09
background: green
tags:
- byte_tech
- go
---

* content
{:toc}
#### 三、测试

测试是避免事物的最后一道屏障。

- 回归测试
- 集成测试
- 单元测试

从上到下，覆盖率逐层变大，成本却逐层降低



Go 语言内置有对单元测试的支持，主要通过 testing 包实现。

- 所有测试文件以`_test.go`结尾
- `func TestXxx(t *testing.T)`
- 初始化逻辑放到`TestMain`中



```go
func Add(a int, b int) int{
  return a+b
}

func TestAdd(t *testing.T) {
  output:=Add(1, 2)
  expectOutput:=3
  if output != expectOutput{
    t.Error("Add failed")
  }
}

```



#### assert

- Go 语言内置的 testing 包提供了 assert 包来进行单元测试的断言，assert 能大大简化测试代码，不需要过多的 if 条件判断，只要最终结果不符合断言，就会自动标记为测试失败。

```go
package Test

import (
   "github.com/stretchr/testify/assert"
   "testing"
)

func Add(a int, b int) int {
   return a + b
}

func TestAdd(t *testing.T) {
   output := Add(1, 2)
   expectOutput := 3
   assert.Equal(t, expectOutput, output)
}

```



