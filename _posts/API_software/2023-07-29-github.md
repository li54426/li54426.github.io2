---
layout: blog
banana: true
category: API_software
title:  "Github使用指南"
date:   2023-07-29 15:17:12
background: blue
tags:
- github
- git
---

* content
{:toc}


### 1 github使用指南

[Git的安装与使用教程（超详细！！！）_9.冄2.7.號的博客-CSDN博客_git安装教程](https://blog.csdn.net/weixin_44950987/article/details/102619708?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&dist_request_id=23755edd-9ec1-4927-b5a1-37dd70887f46&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control)

#### git 目录结构

- Git 的本质是一个**文件系统**，工作目录中的所有文件的**历史版本**以及**提交记录**（commit）都是以文件对象的方式保存在 `.git` 目录中的。
- git下的版本库只位于工作区根目录下的 git目录 , **仅此一处**
- 
- 目前的Key的类型四种,分别是dsa、rsa、ecdsa、ed25519, 默认使用的是rsa, 由于一些安全问题,现在已经**不推荐使用dsa和rsa了**,优先推荐使用ed25519



 ```bash
├─hooks
├─info
├─logs
│  └─refs
│      ├─heads
│      └─remotes
│          └─origin
├─objects
│  ├─info
│  └─pack
└─refs
    ├─heads
    ├─remotes
    │  └─origin
    └─tags
 ```

- `objects`：这里是真正保存 Git 对象的目录，包括三类对象 commit，tree 和 blob
    - Blob存储文件的内容
    - Tree存储文件的目录信息
    - Commit存储提交信息,一个Commit可以对应唯一版本的代码
- 
- refs 内容就是对应 Commit ID因此把ref当做**指针**,指向对应的Commit来表示当前Ref对应的版本.
    - Branch `git checkout -b`可以创建一个新分支, 分支一般用于开发阶段,是可以不断添加 Commit 进行**迭代**的
    - Tag标签一般表示的是一个稳定版本, 指向的Commit一般**不会变更** 
- `refs/head` 下保存 分支信息



#### 1.1 密钥生成/ 设置

```bash
# 生成本地密钥
# ssh-keygen -t ed25519 -C "your_email@example.com"  密钥默认存在 ~/.ssh/id_ed25519.pub
ssh ssh-keygen -t rsa 
// linux 下ssh-keygen -t rsa 
    
//根据日志信息里面的 SSH KEY 存储路径找到 .ssh/id_rsa.pub 文件
//打开 git 网站，右上角用户头像，点击 settings，左侧菜单 SSH KEYS，将文件内容复制到 key 里 添加就可以了

//设置名称和邮箱
git config --global user.name "Your Name"
git config --global user.email "email@example.com"

# 设置简写
git config --global alias.psm 'push origin main'
git config --global alias.plm 'pull origin main'

git config --global alias.st 'status'
git config --global alias.ci 'commit'
git config --global alias.br 'branch'
```



#### 1.2.pull &push

```bash
//推过去所需要的步骤
// 1 添加 
git add .

// 2 提交改变 
git commit -m "描述"

// 3 推送给github
git push origin main 

// 拉过来
git pull origin main

git remote add origin 仓库名
```







#### 远端仓库/ remote

- 第一组使用 HTTPS 协议，第二组使用 SSH 协议。具体选择哪种协议取决于你的需求和配置。
- 使用 HTTPS 协议需要提供**用户名和密码**，而使用 SSH 协议则需要设置密钥对。

```bash
以下两者有什么区别 git remote -v
origin  https://github.com/*****/tinywebserver (fetch)
origin  https://github.com/*****/tinywebserver (push)

origin  git@github.com:*****/simple-douyin.git (fetch)
origin  git@github.com:*****/simple-douyin.git (push)
```



1. `fetch`：`git fetch` 命令用于从远程仓库获取最新的代码和提交历史，但不会自动合并或更新你的本地分支。它将远程仓库的内容下载到你的本地仓库，使你能够查看和**比较**远程分支与本地分支之间的差异。`fetch` 操作**不会修改**你的本地分支，只会更新你的本地仓库。
2. `push`：`git push` 命令用于将你的本地分支的提交推送到远程仓库。它将你的本地分支的提交上传到远程仓库，并将远程仓库的相应分支更新为你的提交。`push` 操作会修改远程仓库的内容。

```bash
# 用于查看当前项目中配置的所有远程仓库的详细信息。
git remote -v

git remote add origin_ssh git@github.com: git/git.git 
git remote add origin_http https://github. com/git/git.git

# 设置fetch 和 push 为不同的仓库
git remote set-url --add --push origin git@github. com: my_repo/git.git
```





#### 查看文件内容

`git cat-file` 是一个用于查看 Git 对象内容的命令。Git 中的对象是存储在仓库中的基本数据单元，包括提交（commit）、树（tree）、标签（tag）和文件内容（blob）等。

使用 `git cat-file` 命令，你可以通过指定对象的哈希值或引用来查看对象的内容。它的基本语法如下：

```plaintext
 cat-file -t <对象引用>
```

这个命令将会返回指定对象的类型。例如，`git cat-file -t abc123` 将会返回对象 `abc123` 的类型，比如 `commit`、`tree`、`tag` 或 `blob`。

```plaintext
 cat-file -p <对象引用>
```

这个命令将会返回指定对象的内容。例如，`git cat-file -p abc123` 将会返回对象 `abc123` 的内容，比如提交信息、文件内容等。

通过使用 `git cat-file` 命令，你可以查看 Git 仓库中的对象的详细信息，这对于调试和了解仓库的内部结构非常有用。

希望这个解释对你有帮助。如果你还有其他问题，请随时告诉我！







#### 版本操作

```bash
# 生成一个 新分支 dev
git checkout -b dev
#  tag<=> 稳定版本
git tag v0.0.1
```





#### 提交操作

```bash
# 修改最近一个的 commit 信息, 修改之后, commit id 会改变
# 老的 不会删除
git commit --amend

# 对最近三个commit的修改, 合并commit, 修改具体的 commit message, 删除某个commit
git rebase -i HEAD~3

# 该命令可以指定删除所有提交中的某个文件或者全局修改邮箱地址等操作
filter --branch
```









#### 日志操作

```bash
git reflog expire --expire=now --all
 git gc --prune=now

```





#### 拉取操作

- `Clone`拉取完整的仓库到本地目录,可以指定分支,深度.
- `Fetch`将远端某些分支最新代码拉取到本地,不会执行merge操作,会修改refs/remote内的分支信息,如果需要和本地代码合并需要手动操作.
- `Pull`拉取远端某分支,并和本地代码进行合并,操作等同于 git fetch + git merge,也可以通过 git pull --rebase 完成 git fetch + git rebase 操作.
    可能存在冲突,需要解决冲突.





```bash
# 初始化一个新的 Git 仓库：
git init

# git remote add origin 远程仓库URL
git remote add origin git@github.com:username/repo.git

# 将远程仓库内容下载到本地：
git pull origin 主分支名称

# 首次拉取代码时一定会存在当前分支与远程分支不同步的问题，我们可以指定使用 rebase 策略将你的更改应用到远程更改之上：
git pull --rebase origin main


# 如何查看我有没有 ssh 权限修改 github 的内容
ssh -T git@github.com   # 

# 如果你想要将本地分支与远程仓库的同名分支进行关联，
git push -u origin <本地分支名称>  
# 可以使用 git push / git pull

# 将会将本地的 main 分支推送到远程仓库 origin 的 master 分支。
git push origin main:master 
```















### 2 其他操作

#### 1.3 建立图片存储仓库

建立 public 仓库

设置 -> 开发者设置 -> 个人访问令牌-> 生成新令牌-> 设置有效期

申请的Token只会显示一次，当你第二次在打开该页面时就无法看到该Token了。如果忘记了Token，唯一的办法就是重新生成一个

**注意如果上传的文件和仓库里的文件重名，会上传失败**

```
//注意: "repo": "Github用户名/仓库名称",
    "token": "之前你申请的Token",    

{
  "picBed": {
    "current": "github",
    "github": {
      "repo": "xxx/xxx",
      "branch": "main",
      "token": "xxxxxxxxx",
      "path": "images/",
      "customUrl": ""
    }
  },
  "picgoPlugins": {}
}
```





